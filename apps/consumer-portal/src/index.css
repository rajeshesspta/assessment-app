@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    font-family: 'Inter', 'Inter var', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --tenant-brand-primary: #4f46e5;
    --tenant-brand-accent: #6366f1;
    --portal-primary: #4f46e5;
    --portal-primary-hover: #4338ca;
    --portal-accent: #6366f1;
    --portal-ring: rgba(99, 102, 241, 0.35);
    --portal-bg-from: theme('colors.sunrise.50');
    --portal-bg-via: theme('colors.white');
    --portal-bg-to: theme('colors.sunrise.100');
  }

  /* Theme presets (set via documentElement.dataset.portalTheme) */
  :root[data-portal-theme='indigo'] {
    --portal-bg-from: theme('colors.indigo.50');
    --portal-bg-via: theme('colors.white');
    --portal-bg-to: theme('colors.sky.100');
  }

  :root[data-portal-theme='emerald'] {
    --portal-bg-from: theme('colors.emerald.50');
    --portal-bg-via: theme('colors.white');
    --portal-bg-to: theme('colors.teal.100');
  }

  :root[data-portal-theme='rose'] {
    --portal-bg-from: theme('colors.rose.50');
    --portal-bg-via: theme('colors.white');
    --portal-bg-to: theme('colors.pink.100');
  }

  :root[data-portal-theme='slate'] {
    --portal-bg-from: theme('colors.slate.50');
    --portal-bg-via: theme('colors.white');
    --portal-bg-to: theme('colors.slate.200');
  }

  :root[data-portal-theme='sunset'] {
    --portal-bg-from: theme('colors.orange.50');
    --portal-bg-via: theme('colors.white');
    --portal-bg-to: theme('colors.amber.100');
  }

  :root[data-portal-theme='ocean'] {
    --portal-bg-from: theme('colors.cyan.50');
    --portal-bg-via: theme('colors.white');
    --portal-bg-to: theme('colors.blue.100');
  }

  :root[data-portal-theme='aurora'] {
    --portal-bg-from: theme('colors.violet.50');
    --portal-bg-via: theme('colors.white');
    --portal-bg-to: theme('colors.cyan.100');
  }

  body {
    @apply min-h-screen text-slate-900 antialiased;
    background-image: linear-gradient(to bottom right, var(--portal-bg-from), var(--portal-bg-via), var(--portal-bg-to));
    background-attachment: fixed;
  }

  ::selection {
    background: color-mix(in srgb, var(--portal-accent) 25%, white);
  }
}

@layer components {
  .portal-surface {
    @apply rounded-2xl border border-brand-50/70 bg-white/90 shadow-sm ring-1 ring-slate-100/70 backdrop-blur;
  }

  .portal-panel {
    @apply portal-surface p-6;
  }

  .portal-panel-tight {
    @apply portal-surface p-4;
  }

  .portal-input {
    @apply w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400;
    @apply focus:outline-none;
  }

  .portal-input:focus {
    border-color: var(--portal-primary);
    box-shadow: 0 0 0 4px var(--portal-ring);
  }

  .portal-btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold;
    @apply transition-colors focus-visible:outline-none;
    @apply disabled:cursor-not-allowed disabled:opacity-60;
  }

  .portal-btn:focus-visible {
    box-shadow: 0 0 0 4px var(--portal-ring);
  }

  .portal-btn-primary {
    @apply portal-btn text-white;
    background-color: var(--portal-primary);
    border: 1px solid var(--portal-primary);
  }

  .portal-btn-primary:hover {
    background-color: var(--portal-primary-hover);
  }

  .portal-btn-secondary {
    @apply portal-btn border border-slate-200 bg-white text-slate-700;
  }

  .portal-btn-secondary:hover {
    border-color: var(--portal-primary);
    color: var(--portal-primary);
  }

  .portal-chip {
    @apply inline-flex items-center rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-600;
  }
}

@layer utilities {
  /*
    Theme bridge: many components still use Tailwind `brand-*` utilities.
    Map those utilities to CSS variables so switching `data-portal-theme` updates accents everywhere.
  */

  .text-brand-500,
  .text-brand-600 {
    color: var(--portal-primary);
  }

  .text-brand-400 {
    color: color-mix(in srgb, var(--portal-primary) 70%, white);
  }

  .text-brand-700,
  .text-brand-800 {
    color: color-mix(in srgb, var(--portal-primary) 80%, black);
  }

  .text-brand-900 {
    color: color-mix(in srgb, var(--portal-primary) 88%, black);
  }

  .bg-brand-500,
  .bg-brand-600 {
    background-color: var(--portal-primary);
  }

  .bg-brand-700 {
    background-color: var(--portal-primary-hover);
  }

  .bg-brand-50 {
    background-color: color-mix(in srgb, var(--portal-primary) 10%, white);
  }

  .bg-brand-100 {
    background-color: color-mix(in srgb, var(--portal-primary) 14%, white);
  }

  .bg-brand-200 {
    background-color: color-mix(in srgb, var(--portal-primary) 20%, white);
  }

  .bg-brand-50\/50 {
    background-color: color-mix(in srgb, var(--portal-primary) 12%, transparent);
  }

  .border-brand-50 {
    border-color: color-mix(in srgb, var(--portal-primary) 10%, transparent);
  }

  .border-brand-100 {
    border-color: color-mix(in srgb, var(--portal-primary) 14%, transparent);
  }

  .border-brand-200 {
    border-color: color-mix(in srgb, var(--portal-primary) 20%, transparent);
  }

  .border-brand-300 {
    border-color: color-mix(in srgb, var(--portal-primary) 28%, transparent);
  }

  .border-brand-500,
  .border-brand-600 {
    border-color: var(--portal-primary);
  }

  .border-brand-50\/60 {
    border-color: color-mix(in srgb, var(--portal-primary) 14%, transparent);
  }

  .border-brand-50\/70 {
    border-color: color-mix(in srgb, var(--portal-primary) 16%, transparent);
  }

  .border-brand-50\/80 {
    border-color: color-mix(in srgb, var(--portal-primary) 18%, transparent);
  }

  .border-t-brand-600 {
    border-top-color: var(--portal-primary);
  }

  .ring-brand-500 {
    --tw-ring-color: var(--portal-ring);
  }

  .ring-brand-200\/40 {
    --tw-ring-color: var(--portal-ring);
  }

  .shadow-brand-200 {
    --tw-shadow-color: color-mix(in srgb, var(--portal-primary) 25%, transparent);
  }

  /* Variant helpers (Tailwind encodes variants into the class name) */
  .hover\:bg-brand-50:hover {
    background-color: color-mix(in srgb, var(--portal-primary) 10%, white);
  }

  .hover\:bg-brand-600:hover {
    background-color: var(--portal-primary);
  }

  .hover\:bg-brand-700:hover {
    background-color: var(--portal-primary-hover);
  }

  .hover\:border-brand-200:hover {
    border-color: color-mix(in srgb, var(--portal-primary) 20%, transparent);
  }

  .hover\:border-brand-300:hover {
    border-color: color-mix(in srgb, var(--portal-primary) 28%, transparent);
  }

  .hover\:text-brand-600:hover {
    color: var(--portal-primary);
  }

  .hover\:text-brand-700:hover {
    color: color-mix(in srgb, var(--portal-primary) 80%, black);
  }

  .focus\:border-brand-500:focus {
    border-color: var(--portal-primary);
  }

  .focus\:ring-brand-500:focus {
    --tw-ring-color: var(--portal-ring);
  }

  .focus\:ring-brand-200\/40:focus {
    --tw-ring-color: var(--portal-ring);
  }

  .focus-within\:border-brand-500:focus-within {
    border-color: var(--portal-primary);
  }

  .focus-within\:ring-brand-200\/40:focus-within {
    --tw-ring-color: var(--portal-ring);
  }
}
